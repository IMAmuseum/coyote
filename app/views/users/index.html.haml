-title = 'Users'
-meta title: title
- cache ['v1', admin?,  @users] do
  .index-outer
    .index
      .index-inner
        %header
          %h1#page-title{tabindex: -1}
            #{title}: #{@users.count}
        %table.index-table
          %caption.sr-only Index table for users
          %thead
            %tr
              %th{scope: "col"}<
                First name
              %th{scope: "col"}<
                Last name
              %th{scope: "col"}<
                Email
              %th{scope: "col"}<
                Role
              %th{scope: "col"}<
                Actions

          %tbody
            - @users.each_with_index do |user, idx|
              %tr{class: "item"}
                %td= user.first_name
                %td= user.last_name
                %td= user.email
                %td= user.admin ? "Admin" : "Regular"
                %td.text-right<
                  = link_to user, class: "btn btn-show", title: "Show this user" do
                    View
                  = link_to edit_user_path(user), class: "btn btn-edit", title: "Edit this user"  do
                    %i.fa.fa-fw.fa-pencil{"aria-hidden" => true}
                  = link_to user, title: "Delete this user" , class: "btn btn-destroy",  :method => :delete, :data => { :confirm => "Are you sure you want to delete #{user}?"} do
                    %i.fa.fa-fw.fa-trash{"aria-hidden" => true}

        %nav.index-nav{role:"navigation"}
          = link_to new_user_path, class: 'btn btn-primary new-link' do
            %i.fa.fa-fw.fa-plus{"aria-hidden" => true}
            New User
